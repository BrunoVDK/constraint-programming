\section{Hashiwokakero}

Hashiwokakero is yet another Japanese logic puzzle published by the same company in which islands have to be connected by bridges. Six constraints are to be respected, the last one being the connectedness constraint, i.e. that all islands have to be connected. What follows is a discussion of an implementation of two solvers of Hashiwokakero puzzles. One written in ECLiPSe, the other in \texttt{CHR}.

\subsection{ECLiPSe implementation}

A partial solution by ECLiPSe's creator Joachim Schimpf was provided. It did not enforce the connectedness constraint. Joachim defines four variables for each of the input puzzle's cells. They represent the number of bridges for each of the cell's directions (north, east, south, west). Then he enforces five of the constraints :
\begin{enumerate}
\item[1-2.] Bridges run in one straight line, horizontally or vertically. This is enforced with equality constraints, making sure that the number of bridges for a given direction of a given cell equals the number of bridges in the opposite direction of a neighbouring cell. A total of four equality constraints for every cell except those on the border, which may only have two or three neighbours\footnote{It can be noted that Joachim's code enforces both $A$\#=$B$ and $B$\#=$A$ in several cases. It has no effect on the runtimes.}.
\item[3.] Bridges cannot cross other bridges or islands. This is enforced by making sure that any cell that does not represent an island either has no horizontal or no vertical bridges.
\item[4.] At most two bridges connect a pair of islands. Joachim imposes this constraint by declaring the domains of the variables to be $[0\dots 2]$.
\item[5.] The number of bridges connected to an island must match the number $X$ on that island. A simple sum constraint ($N+E+S+W$\#=$X$) suffices to enforce this one.
\end{enumerate}

The connectedness constraint was enforced through the use of an analogous set of four variables ($FN,FE,FS,FW$) per cell, denoting the \textit{flow} for each of the cell's directions. Say the top left-most island is said to be the sink, then if a flow can be assigned to all islands such that the sink's incoming flow equals the total number of islands minus one, the islands are sure to be connected. [EXPLAIN CONSTRAINTS]\\\par

All of these constraints are active, meaning that when variables are, in a sense, `woken up', the domain of associated variables is updated accordingly.\\\par

If one makes use of the \texttt{most\_constrained} or the \texttt{occurrence} variable heuristic, runtimes increase. The \texttt{largest} or \texttt{smallest} heuristics perform even worse. This is due to the fact that these heuristics are more likely to target flow variables first. These variables have larger domains and most of the values in their domain cannot partake in a solution. As a result, backtracks increase and runtimes do, too.

\subsection{CHR implementation}

A \texttt{CHR} implementation was created, also. Because of the results of the previous experiments no fancy heuristic (such as \texttt{occurrence} or \texttt{most\_constrained}) was made use of. 